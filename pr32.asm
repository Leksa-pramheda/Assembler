Assume CS: Code, DS: Code
Code SEGMENT
org 100h
.286
Start proc near ; ???????? ?????????
mov ax,cs
mov ds,ax ; DS = CS
jmp beg ; "????????" ????? ??????????
iniflag db 0 ; ???? ????????
old_int1c_off dw 0 ; ???????? ??????? ???????
old_int1c_seg dw 0 ; ??????? ??????? ???????
tek_mel dw ? ; ????? ??????? ???? ????????? ???????
beg: mov ax,351ch ; ?????????? ??????? ??????? 
int 21h
mov cs:old_int1c_off,bx ; ?????? ????????
mov cs:old_int1c_seg,es ; ?????? ????????
lea dx,new_int1c ; ?????? ?????? ??????? 
mov ah,25h ; ??????? ????????? ??????? ??????.
mov al,1ch ; ????? ??????? ??????????
int 21h ; DS:DX ? ????? ????? ????????? ???.
beg1: call kbin ; ????? ??????????
cmp al,'1' ; = '1' ?
jnz beg2 ; ???
mov byte ptr iniflag,1 ; ????????? ????? ????.
lea ax,mel1
mov tek_mel,ax
call muz
jmp beg1 ; ??????? ?? ?????? ?????
beg2: cmp al,'2' ; = '2' ?
jnz beg3 ; ???
mov byte ptr iniflag,1 ; ????? ????? ????.
lea ax,mel2
mov tek_mel,ax
jmp beg1 ; ??????? ?? ?????? ?????
beg3: cmp al,'3' ; = '3' ?
jnz beg4 ; ???
mov byte ptr iniflag,1 ; ????? ????? ????.
lea ax,mel3
mov tek_mel,ax
jmp beg1 ; ??????? ?? ?????? ?????
beg4: cmp al,'q' ; = 'q' ?
jnz beg1 ; ???
; ?????????????? ??????? ??????? 1? ? ?????
mov dx,old_int1c_off ; ???????? ??????? ???????
mov ax,old_int1c_seg ; ??????? ??????? ???????
mov ds,ax ; DS:DX ? ????? ????????. ???????
mov ax,251ch ; ????????? ??????? ??????? 
int 21h
mov ax, 4c00h
int 21h
start endp
; ????? ?????????? ?????????? 
new_int1c proc far ; ??????? ?????????
pusha ; ?????????? ???? ?????????
call muz ; ????? ????????? ?????????? ?????
popa ; ?????????????? ???? ?????????
iret ; ??????? ?? ????????? ????????? ??????????
new_int1c endp
; ????????? ?????????? ?????????? ?????
; tek_mel ? ????? ??????? ???? ????????? ???????
muz proc near
test byte ptr cs:iniflag,0ffh ; ???????? ?????
jnz muz1 ; ???????????
muze: in al,61h ; ?????? ????????? ?????????? ????? ?
and al,0fch ; ?????????? ???????? 
out 61h,al ; ?????? ? ????????? ???? ?
ret ; ?????, ???? ???? ?? ???????
muz1: mov si,cs:tek_mel ; ????? ??????? ????
mov bl,cs:[si] ; ??????? ????
cmp bl,255 ; ????? ?
jnz muz2
; ?????????? ?????
in al,61h ; ?????? ????????? ?????????? ????? ?
and al,0fch ; ?????????? ???????? 
out 61h,al ; ?????? ? ????????? ???? ?
inc cs:tek_mel ; ??????? ? ?????? ????. ????
ret
muz2: or bl,bl ; = 0 ?
jnz muz3 ; ???????????
jmp muze ; ?????, ???? ??????? ?????
muz3: shl bl,1 ; ?????????
xor bh,bh ; bh = 0
mov ax,cs:noty[bx] ; ? DI ??????? ????
; ???????????????? ???????? ??????? 2 ??????
inc cs:tek_mel ; ??????? ? ?????? ????. ????
out 42h,al ; ??.???? ??????? ? ????? 2 ???????
xchg al,ah ; AH ? AL
out 42h,al ; ??.???? ??????? 
; ?????????? ????????
in al,61h ; ?????? ????????? ?????????? ????? ?
or al,3 ; ?????????? ???????? (???? 0 ? 1)
out 61h,al ; ?????? ? ????????? ???? ?
ret ; ?????????? ?????
muz endp
kbin proc near ; ???? ? ?????????? ? ???????? ?? ????? ???? ; ????????? ????????? ? ??????????? ? ?????? 
mov ah,0 ; ??????? 0
int 16h ; ????????????? ??????????
ret ; ????? ?? ?????????
kbin endp
; ??????? "????? ?????"
mel1 db 17,17,255,13,13,255,17,17,255,13,13,255,18,18,255
db 17,17,255,15,15,15,15,255,255
db 8,8,255,8,8,255,8,8,255,10,255,12,255
db 13,13,255,13,13,255,13,13,13,13
db 0
; ??????? "???????????? ??????"
mel2 db 1,1,1,4,4,4,8,8,8,4,4,4,6,6,6,6,6,6,4,4,4,3,3,3
db 8,8,8,8,8,8,6,6,6,6,6,6,1,1,1,1,1,1,1,1,1,1,1,1
db 0
; ??????? "???-???"
mel3 db 18,6,25,13,22,18,25,13,20,1,23,8,22,5,20,1
db 25,6,13,13,25,10,13,13,25,10,27,13,22,10,23,13,20,1
db 11,11,20,5,11,11,20,1,23,11,22,5,20,11,18,6,30,18
db 29,17,27,15,25,13,23,11,22,10,20,8,18,6,13,13,18,10
db 13,13,20,1,23,8,22,5,20,8,25,6,13,13,25,10,13,13
db 25,6,27,13,22,10,23,13,20,1,8,8,20,5,8,8,20,1,23,8
db 22,5,20,8,18,6,25,10,20,13,22,10,18,6,6,6,6,6,6,6
db 34,8,24,12,24,15,34,12,32,1,25,5,25,8,29,5,30,6,34,13
db 37,10,34,13,34,1,32,8,32,5,8,8,34,8,24,12,24,15,34,12
db 32,1,25,5,25,8,29,5,29,3,27,7,29,10,27,13,34,12,32,8
db 34,6,32,3,34,8,24,15,24,12,34,15,32,1,29,8,25,5,29,8
db 30,6,34,13,37,10,34,13,34,1,32,5,32,8,5,5,34,8,24,15
db 24,12,34,15,32,1,25,6,25,5,29,8,29,3,27,7,29,10,27,7
db 32,8,30,6,29,5,27,3,25,1,8,8,25,5,8,8,27,12,30,15
db 29,8,27,12,32,1,8,8,32,5,8,8,32,1,34,8,29,5,30,8,27,8
db 15,15,27,12,15,15,27,8,30,12,29,15,27,12,25,1,37,1
db 36,5,34,6,32,8,30,8,29,10,27,12,25,1,8,8,25,5,8,8
db 27,8,30,15,29,12,27,15,32,1,8,8,32,5,8,8,32,1,34,8
db 29,5,30,8,27,8,15,15,27,12,15,15,27,8,30,15,29,12
db 27,15,25,1,32,8,27,5,29,8,25,1,32,32,37,37,0
; ???????????? ??????? ??? ???
noty dw 0eeeh,0e18h,0d49h,0c8eh,0bdfh,0b2fh,0abeh
dw 9f7h,968h,8e0h,861h,7e8h,777h,70ch,6a5h,647h
dw 5edh,597h,547h,4fbh,4b4h,470h,430h,3f4h
dw 3bbh,386h,352h,323h,2f6h,2cbh,2a3h,27dh,25ah,238h,218h,1fah
dw 1ddh,1c3h,1a9h,192h,17bh,166h,152h,13fh,12dh,11ch,10ch,0fdh
dw 0
code ends
END Start